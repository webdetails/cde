<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- Generic stuff --><!-- Framework CSS --><!--[if lt IE 8]><link rel="stylesheet" href="@CDF_RESOURCES_BASE_URL@/js/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->
  <!-- CDF TODO: change paths? move to an include? -->
  <link rel="stylesheet" href="@CDF_RESOURCES_BASE_URL@/js/autobox/jquery.ui.autobox.css" type="text/css">
  <link rel="stylesheet" href="@CDF_RESOURCES_BASE_URL@/js/blueprint/screen.css" type="text/css">
  <link rel="stylesheet" href="@CDF_RESOURCES_BASE_URL@/js/fancybox/jquery.fancybox.css" type="text/css">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>
  <meta http-equiv="X-UA-Compatible" content="IE=8">

  <title>Webdetails CDE</title>
</head>
<body>
  <div class="outside">
    <div class="container">
      <div class="cdfdd-toolbar-logo"></div>
      <div class="cdfdd-toolbar span-24 last">
      <div id = "header" class="span-11 cdfdd-main prepend-2">
        <div id = "headerLinks" class="headerLinks">

          <div class="headerButton">
            <a onclick="cdfdd.newDashboard()" class="headerButton">
              New
            </a>
          </div>
          <div class="headerButton">
            <a onclick="cdfdd.save()" class="headerButton">
              Save
            </a>
          </div>
          <div class="headerButton">
            <a class="headerButton" id="SaveAs" onclick="cdfdd.combinedSaveAs()">Save as...</a>
          </div>
          <div class="headerButton">
            <a id="cdfdd-main-Reload" href="javascript:Panel.enableThisButton(this);cdfdd.reload()" class="headerButton">
              Reload
            </a>
          </div>
          <div class="headerButton">
            <a onclick="cdfdd.saveSettings()" class="headerButton">
              Settings
            </a>
          </div>
        </div>
      </div>
        <!---->
        <!-- Modes -->
        <div style=" display: inline-block; position: absolute; right: 0; ">
          <div class="span-9 cdfdd-modes" style="min-width:380px;">
            <div class="panelButton" title="Datasources Panel">
            <a onclick="window.cdfdd &amp;&amp; cdfdd.datasources &amp;&amp; (Panel.enableThisButton(this), cdfdd.datasources.switchTo())" class="tooltip panelButtonClickableArea"><div class="datasourcesPanelButton"></div></a>
            </div>
            <div class="panelButton" title="Components Panel">
            <a onclick="window.cdfdd &amp;&amp; cdfdd.components &amp;&amp; (Panel.enableThisButton(this),cdfdd.components.switchTo())" class="tooltip panelButtonClickableArea"><div class="componentsPanelButton"></div></a>
            </div>
            <div class="panelButton panelButton-active" title="Layout Panel">
            <a onclick="window.cdfdd &amp;&amp; cdfdd.layout &amp;&amp; (Panel.enableThisButton(this), cdfdd.layout.switchTo())" class="tooltip panelButtonClickableArea"><div class="layoutPanelButton"></div></a>
            </div>
          </div>
          <div class="span-2 cdfdd-preview last last">
            <div class="panelButton" title="Preview your Dashboard" style="width: 40px;">
              <a onclick="cdfdd.previewMode()" class="tooltip panelButtonClickableArea"><div id="previewButton"></div></a>
            </div>
          </div>
        </div>
      </div>
      <hr class="hr-hidden">
      <div id="cdfdd-panels" class="span-24 round last"></div>

      <div id="footer" class="footer span-24">

        <div class="span-3 button cdfdd-about last" onclick="cdfdd.footerMode('about.fancybox')"> About </div>
        <div class="span-3 button cdfdd-documentation last" onclick="cdfdd.footerMode('documentation.fancybox')"> Documentation  </div>

        <a class="webdetailsLogo" target="_blank" href="http://www.webdetails.pt" border="0"> <img src="@CDE_RESOURCES_BASE_URL@/images/NAV/logo_webdetails.png"></a>

      </div>
    </div>
  </div>

  <div id="wizardDialog" class="jqmWindow" style="display: none"> </div>
  <div id="keyboard_shortcuts_help" style="display: none;">
    <div style="margin: 2em;">
      <h4>Keyboard Shortcuts</h4>
      <p>
        <span>help (this) </span>?
      </p>
      <p>
        <span>switch to Layout </span>1
      </p>
      <p>
        <span>switch to Components </span>2
      </p>
      <p>
        <span>switch to Datasources </span>3
      </p>
      <p>
        <span>configure CGG</span>&lt;Shift&gt; + g
      </p>
      <p>
        <span>save</span>&lt;Shift&gt; + s
      </p>
      <p>
        <span>preview</span>&lt;Shift&gt; + p
      </p>
      <p>
        <span>validate components (testing)</span>&lt;Shift&gt; + v
      </p>
      <span><span colspan="2" style="text-align: right;">
      <a href="#" onclick="cdfdd.toggleHelp()" style="color: #0091F6; font-weight: normal;">close</a></span>
      </span>
    </div>
  </div>
    <script language="javascript" type="text/javascript">
      var CDFDDFileName = '@FILENAME@';
      var CDFDDServerUrl = '@SERVERURL@';
      var CDFDDDataUrl = "@DATAURL@";
      var WEB_CONTEXT_BASE = CDFDDServerUrl + "../../";//TODO: use a new tag here?
    </script>
    <script type="text/javascript" src="@CDF_RESOURCES_BASE_URL@/js/json.js"></script>
    <!-- CDF files -->
 @CDF@
 @STYLES@ 
    <!-- CDF-DD files -->
 @SCRIPTS@
<!-- TODO: ugly as hell: -->
<script type="text/javascript" src="@CDE_RENDERER_API@/getComponentDefinitions"></script>
<!-- ACE -->
<!-- TODO: move ACE -->
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/resources/ace/src/ace.js"></script>
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/resources/ace/src/mode-javascript.js"></script>
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/resources/ace/src/mode-css.js"></script>
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/resources/ace/src/mode-xml.js"></script>
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/resources/ace/src/mode-html.js"></script>
<script language="javascript" type="text/javascript" src="@CDE_RESOURCES_BASE_URL@/js/cdf-dd-aceWrapper.js"></script>

<!-- i18n plugin -->
<script type="text/javascript">
  // Init jQuery i18n plugin
  loadMessageBundles = function(lang) {
    jQuery.i18n.properties({
      name:'#{GLOBAL_MESSAGE_SET_NAME}',
      path:'#{GLOBAL_MESSAGE_SET_PATH}',
      mode:'both',
      language:(lang == 'browser' ? jQuery.i18n.browserLang() : lang),
      callback: function() {
        #{GLOBAL_MESSAGE_SET}
      }
    });
    Dashboards.setI18nSupport('#{LANGUAGE_CODE}', jQuery.i18n);
  };

  $(document).ready(function(){
    // Initialize jquery.i18n plugin - load message files
    var userLocale = '#{LANGUAGE_CODE}';
    loadMessageBundles(userLocale);
  });
</script>
<!-- Layout formats -->
<script type="text/javascript">



$(".controlOptions").click(function(evt) {
  cdfdd.savePulldown(this,evt);
});

$(function() {
  $(".round").corner();
});

//Fix the logo for IE<9 & Popup strech problems
/* CDF-271 $.browser is depricated http://msdn.microsoft.com/en-us/library/ms537509.aspx */
var rv;
var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
if(re.exec(navigator.userAgent) != null) { rv = parseFloat(RegExp.$1); }
if(rv) {
  if(rv < 9) {
    $('.cdfdd-toolbar-logo').css('position','relative');
    $('.cdfdd-toolbar-logo').css('position','absolute');
    $('.hr-hidden').css('display','none');
  } else if(rv == 9) {
    $(document).bind('DOMNodeInserted', function(event) { 
      if(event != null && event.srcElement != null && event.srcElement.lastChild != null) {
        var childClassName = event.srcElement.lastChild.className;
        if(childClassName == "popup") {
          $(".popup").addClass("popup-ie9");
        }
      }
    });
  }
}

$(document).ready(function(){
  var initPlugins = function (result) {
    result.map(function(plugin){
      //Verify if there are space characters on the plugin ID if there are the plugin title will be used as if it is the ID
      if(plugin.pluginId.indexOf(" ") == -1){
        $.getScript("../"+plugin.pluginId+plugin.jsPath);
      }else{
        $.getScript("../"+plugin.title+plugin.jsPath);
      }
    });
  }


  PluginRequests.getCDEPlugins(initPlugins);

});


</script>
</body>
</html>
